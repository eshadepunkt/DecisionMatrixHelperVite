import{Q as i}from"./QBtn.12c138fb.js";import{Q as x}from"./QSpace.d2f34c7f.js";import{a as C,b as d,e as b,f as U}from"./QTable.3fc2ed07.js";import{c as u}from"./QSeparator.19eee7b9.js";import{Q as q}from"./use-router-link.0c6ea2e7.js";import{Q as D}from"./QRating.0fd4537d.js";import{c as E,a as N,v as h,Q as S}from"./alternative.a889af43.js";import{Q as j}from"./use-prevent-scroll.c0be1461.js";import{v as B,r as m,y as c,z as y,A as n,B as a,k as T,Z as z,W as F,X as I,Y as $,E as L,a0 as R}from"./index.cceb1773.js";const P=B({__name:"AlternativesComponent",setup(M){const r=E(),p=N(),f=m(!1),v=m(""),g=m(!1);function k(l){return l.length<4||l.length>1e3?(f.value=!0,v.value="The Description must be between 4 and 1000 characters long!",!1):(f.value=!1,v.value="",!0)}const w=m(["name","description","status","assessment"]),V=[{name:"name",align:"left",label:"Alternatives",field:"name",sortable:!0},{name:"description",align:"left",label:"Description (editable)",field:"description",sortable:!0},{name:"assessment",align:"left",label:"Features",field:l=>{var o;return(o=l.assessments.filter(e=>e.feature.id===l.id)[0])==null?void 0:o.justification},sortable:!0},{name:"delete",align:"left",label:"Delete",field:"delete",sortable:!1}];function Q(){if(r.alternatives.length>0&&r.alternatives[r.alternatives.length-1].name==="new Alternative")return;let l=new Array(p.features.length);for(let o=0;o<p.features.length;o++)l[o]={id:h(),feature:p.features[o],justification:"justification "+o,score:0};r.addAlternative({id:h(),name:"Alternative "+r.alternatives.length,description:"new Alternative description",assessments:l,score:0})}function _(l){r.deleteAlternative(l)}function A(){r.deleteAllAlternatives()}return(l,o)=>(c(),y(U,{title:"Alternatives",rows:L(r).alternatives,columns:V,"rows-per-page-options":[10],"row-key":"id"},{top:n(()=>[a(i,{class:"q-ma-md",color:"primary",icon:"add",label:"",onClick:Q,"no-caps":""}),a(i,{class:"q-ma-md",color:"primary",icon:"delete",label:"",onClick:A,"no-caps":""}),a(x),a(C,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=e=>w.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":l.$q.lang.table.columns,"emit-value":"","map-options":"",options:V,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(i,{class:"q-ml-md",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""})]),body:n(e=>[a(b,{props:e},{default:n(()=>[a(d,{key:"name",props:e,"auto-width":""},{default:n(()=>[a(u,{style:{"min-width":"128px"},label:"Name",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,type:"textarea",readonly:g.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(d,{key:"description",props:e},{default:n(()=>[a(u,{label:"Description",modelValue:e.row.description,"onUpdate:modelValue":t=>e.row.description=t,type:"textarea",readonly:g.value,autogrow:"",borderless:"",dense:"",validate:k,error:f.value,"error-message":v.value},null,8,["modelValue","onUpdate:modelValue","readonly","error","error-message"])]),_:2},1032,["props"]),a(d,{key:"assessment",props:e},{default:n(()=>[a(i,{size:"sm",color:"accent",round:"",dense:"",onClick:t=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1032,["props"]),a(d,{key:"delete",props:e,"auto-width":""},{default:n(()=>[a(i,{class:"q-ml-md",color:"secondary","icon-right":"delete","no-caps":"",onClick:t=>_(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"]),T(a(b,{props:e},{default:n(()=>[a(d,{colspan:"100%"},{default:n(()=>[(c(!0),F($,null,I(e.row.assessments,t=>(c(),y(j,{dense:"",key:t.id},{default:n(()=>[a(S,null,{default:n(()=>[a(u,{modelValue:t.feature.name,"onUpdate:modelValue":s=>t.feature.name=s,class:"q-mr-lg q-pa-sm",type:"text",readonly:"",borderless:""},{append:n(()=>[t.feature.isExclusive?(c(),y(q,{key:0,name:"warning",color:"secondary"})):R("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"]),a(u,{style:{"min-width":"350px"},type:"textarea",modelValue:t.justification,"onUpdate:modelValue":s=>t.justification=s,autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),a(D,{modelValue:t.score,"onUpdate:modelValue":s=>t.score=s,size:"md",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["props"]),[[z,e.expand]])]),_:1},8,["rows"]))}});export{P as _};
